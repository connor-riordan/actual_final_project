---
title: "final_code"
author: "Connor Riordan"
date: "4/21/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
library(readxl)
library(janitor)
library(gt)
library(scales)
library(markdown)
library(usmap)
```

## Presidential Election Results by County 2000-2016

```{r}
pres_results <- read.csv("raw_data/countypres_2000-2016.csv") %>%
  clean_names() %>%
  select(! version)

pres_results <- pres_results %>%
  mutate(abb_county = paste0(county, ", ", state_po))

dat <- pres_results %>%
  filter(abb_county == "Autauga, AL" | abb_county == "Baldwin, AL")

dat %>%
  filter(year == 2000) %>%
  ggplot(aes(candidate, candidatevotes, fill = abb_county)) + 
  geom_bar(stat = "identity", position = position_dodge())

us_counties <- map_data("county")
  
us_counties

pres_results$region <- tolower(pres_results$state)

# left_join(us_counties, pres_results)
```

## American Community Surveys 2014-2018 (5-Year Estimates)

```{r}
acs <- read.csv("raw_data/acs_5ye.csv") %>%
  clean_names() %>%
  select(! c(4:52)) %>%
  select(! c(54:57))


```

## Health Data (2016)

```{r}
health <- read.csv("raw_data/health_data_2016.csv") %>%
  clean_names() %>%
  select(! 3:6)



```

## State Education Data 2018

```{r}

education <- read.csv("raw_data/state_education_data_2018.csv") %>%
  clean_names() %>%
  select(! 3:7)


```

## Family Voting Registration by Age and Income 2016

```{r}

age_income_2016_n <- read_excel("raw_data/family_voting_registration_by_age_and_income_2016.xlsx", skip = 5, col_types = "numeric") %>%
  clean_names() %>%
  select(! c(x1, x2))

age_income_2016_c <- read_excel("raw_data/family_voting_registration_by_age_and_income_2016.xlsx", skip = 5) %>%
  clean_names() %>%
  select(c(x1, x2))

age_income_2016 <- cbind(age_income_2016_c, age_income_2016_n)

age_income_2016 <- age_income_2016 %>%
  rename(
    "age_group" = x1,
    "total_income" = x2,
    "total_population" = x3,
    "reported_registered" = reported_registered_5,
    "reported_registered_percent" = x6,
    "reported_not_registered_percent" = x8,
    "no_response_to_registration" = no_response_to_registration1,
    "no_response_to_registration_percent" = x10,
    "reported_voted" = reported_voted_11,
    "reported_voted_percent" = x12,
    "reported_not_voted_percent" = x14,
    "no_response_to_voting" = no_response_to_voting2,
    "no_response_to_voting_percent" = x16,
    "registered_total_percent" = reported_registered_17,
    "voted_total_percent" = reported_voted_18
  )
age_income_2016_18_over <- age_income_2016 %>%
  head(13) %>%
  select(! age_group) %>%
  drop_na()

age_income_2016_18_24 <- age_income_2016[14:25,] %>%
  select(! age_group) %>%
  drop_na()

age_income_2016_25_44 <- age_income_2016[26:37,] %>%
  select(! age_group) %>%
  drop_na()

age_income_2016_45_64 <- age_income_2016[38:49,] %>%
  select(! age_group) %>%
  drop_na()

age_income_2016_65_74 <- age_income_2016[50:61,] %>%
  select(! age_group) %>%
  drop_na()

age_income_2016_75_over <- age_income_2016[62:73,] %>%
  select(! age_group) %>%
  drop_na()

age_income_2016
```















